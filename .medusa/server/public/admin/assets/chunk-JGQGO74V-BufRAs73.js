import{r as i,bC as l,cI as u,j as n,m as S,u as f,c as Q,b as U,cJ as V,w as W}from"./index-C9AxsCP1.js";import{P as m}from"./prompt-klaj1z2V.js";var j=e=>{const s=Q();return i.useMemo(()=>{var a;const t=(a=s.state)==null?void 0:a.restore_params;return t?`${e}?${t.toString()}`:e},[s.state,e])},D=({form:e,blockSearchParams:s=!1,children:o,onClose:t})=>{const{t:a}=U(),{formState:{isDirty:p}}=e,r=V(({currentLocation:c,nextLocation:g})=>{const{isSubmitSuccessful:h}=g.state||{};if(h)return t==null||t(!0),!1;const y=c.pathname!==g.pathname,G=c.search!==g.search;if(s){const F=p&&(y||G);return F||t==null||t(h),F}const x=p&&y;return x||t==null||t(h),x}),v=()=>{var c;(c=r==null?void 0:r.reset)==null||c.call(r)},d=()=>{var c;(c=r==null?void 0:r.proceed)==null||c.call(r),t==null||t(!1)};return n.jsxs(W,{...e,children:[o,n.jsx(m,{open:r.state==="blocked",variant:"confirmation",children:n.jsxs(m.Content,{children:[n.jsxs(m.Header,{children:[n.jsx(m.Title,{children:a("general.unsavedChangesTitle")}),n.jsx(m.Description,{children:a("general.unsavedChangesDescription")})]}),n.jsxs(m.Footer,{children:[n.jsx(m.Cancel,{onClick:v,type:"button",children:a("actions.cancel")}),n.jsx(m.Action,{onClick:d,type:"button",children:a("actions.continue")})]})]})})]})},M=i.createContext(null),C=({prev:e,children:s})=>{const o=f(),[t,a]=i.useState(!0),p=i.useCallback(v=>{o(v||e,{replace:!0,state:{isSubmitSuccessful:!0}})},[o,e]),r=i.useMemo(()=>({handleSuccess:p,setCloseOnEscape:a,__internal:{closeOnEscape:t}}),[p,a,t]);return n.jsx(M.Provider,{value:r,children:s})},O=i.createContext(null),T=({children:e,onOpenChange:s})=>{const[o,t]=i.useState({}),a=d=>o[d]||!1,p=(d,c)=>{t(g=>({...g,[d]:c})),s(c)},r=d=>{t(c=>({...c,[d]:!1}))},v=d=>{t(c=>{const g={...c};return delete g[d],g})};return n.jsx(O.Provider,{value:{getIsOpen:a,setIsOpen:p,register:r,unregister:v},children:e})},w=()=>{const e=i.useContext(O);if(!e)throw new Error("useStackedModal must be used within a StackedModalProvider");return e},X=({prev:e="..",children:s})=>{const o=f(),[t,a]=i.useState(!1),[p,r]=i.useState(!1),v=j(e);i.useEffect(()=>(a(!0),()=>{a(!1),r(!1)}),[]);const d=c=>{if(!c){document.body.style.pointerEvents="auto",o(v,{replace:!0});return}a(c)};return n.jsx(l,{open:t,onOpenChange:d,children:n.jsx(C,{prev:v,children:n.jsx(T,{onOpenChange:r,children:n.jsx(l.Content,{"aria-describedby":void 0,className:S({"!bg-ui-bg-disabled !inset-y-5 !right-5":p}),children:s})})})})},Y=l.Header,Z=l.Title,L=l.Description,ee=l.Body,te=l.Footer,ae=l.Close,re=D,fe=Object.assign(X,{Header:Y,Title:Z,Body:ee,Description:L,Footer:te,Close:ae,Form:re}),se=()=>{const e=i.useContext(M);if(!e)throw new Error("useRouteModal must be used within a RouteModalProvider");return e},ne=({prev:e="..",children:s})=>{const o=f(),[t,a]=i.useState(!1),[p,r]=i.useState(!1),v=j(e);i.useEffect(()=>(a(!0),()=>{a(!1),r(!1)}),[]);const d=c=>{if(!c){document.body.style.pointerEvents="auto",o(v,{replace:!0});return}a(c)};return n.jsx(u,{open:t,onOpenChange:d,children:n.jsx(C,{prev:v,children:n.jsx(T,{onOpenChange:r,children:n.jsx(oe,{stackedModalOpen:p,children:s})})})})},oe=({stackedModalOpen:e,children:s})=>{const{__internal:o}=se(),t=!o.closeOnEscape;return n.jsx(u.Content,{onEscapeKeyDown:t?a=>{a.preventDefault()}:void 0,className:S({"!bg-ui-bg-disabled !inset-x-5 !inset-y-3":e}),children:s})},ce=u.Header,ie=u.Title,de=u.Description,le=u.Footer,ue=u.Body,pe=u.Close,ve=D,ye=Object.assign(ne,{Header:ce,Title:ie,Body:ue,Description:de,Footer:le,Close:pe,Form:ve}),ge=({id:e,children:s})=>{const{register:o,unregister:t,getIsOpen:a,setIsOpen:p}=w();return i.useEffect(()=>(o(e),()=>t(e)),[]),n.jsx(l,{open:a(e),onOpenChange:r=>p(e,r),children:s})},N=l.Close;N.displayName="StackedDrawer.Close";var k=l.Header;k.displayName="StackedDrawer.Header";var b=l.Body;b.displayName="StackedDrawer.Body";var R=l.Trigger;R.displayName="StackedDrawer.Trigger";var B=l.Footer;B.displayName="StackedDrawer.Footer";var E=l.Title;E.displayName="StackedDrawer.Title";var H=l.Description;H.displayName="StackedDrawer.Description";var P=i.forwardRef(({className:e,...s},o)=>n.jsx(l.Content,{ref:o,className:S(e),overlayProps:{className:"bg-transparent"},...s}));P.displayName="StackedDrawer.Content";var xe=Object.assign(ge,{Close:N,Header:k,Body:b,Content:P,Trigger:R,Footer:B,Description:H,Title:E}),me=({id:e,onOpenChangeCallback:s,children:o})=>{const{register:t,unregister:a,getIsOpen:p,setIsOpen:r}=w();i.useEffect(()=>(t(e),()=>a(e)),[]);const v=d=>{r(e,d),s==null||s(d)};return n.jsx(u,{open:p(e),onOpenChange:v,children:o})},I=u.Close;I.displayName="StackedFocusModal.Close";var _=u.Header;_.displayName="StackedFocusModal.Header";var A=u.Body;A.displayName="StackedFocusModal.Body";var $=u.Trigger;$.displayName="StackedFocusModal.Trigger";var J=u.Footer;J.displayName="StackedFocusModal.Footer";var K=u.Title;K.displayName="StackedFocusModal.Title";var q=u.Description;q.displayName="StackedFocusModal.Description";var z=i.forwardRef(({className:e,...s},o)=>n.jsx(u.Content,{ref:o,className:S("!top-6",e),overlayProps:{className:"bg-transparent"},...s}));z.displayName="StackedFocusModal.Content";var Fe=Object.assign(me,{Close:I,Header:_,Body:A,Content:z,Trigger:$,Footer:J,Description:q,Title:K});export{ye as R,Fe as S,w as a,fe as b,xe as c,se as u};
